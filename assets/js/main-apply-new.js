(function($) {

	/*Slider Home Page*/
	$('#home-splash').maximage({
		cycleOptions: {
            fx:'fade',
            speed: 800,
            timeout: 12000,
	        pager:   '#splash-nav',
	        pagerAnchorBuilder: pagerFactory
        }

	});

	$('#comment').click(function(e){
		e.preventDefault();
		$('#lpchat-container-1412132244995-1').click();
	});

	$('#social-close').click(function(){

		$('#main-button').click();

	});

	$('#main-button').click(function(e){
		e.preventDefault();
		$(this).toggleClass('active');
		$('#main-container').fadeToggle();

	});

	/*Lightbox*/
	$(".various").fancybox({
		fitToView	: false,
		autoSize	: true,
		closeClick	: false,
		openEffect	: 'none',
		closeEffect	: 'none'
	});

	$(".modal").fancybox({
		fitToView	   : false,
		autoSize	    : false,
		width		      : '800',
		height		     : '95%',
		closeClick	  : false,
		openEffect	  : 'none',
		closeEffect	 : 'none'
	});

	/*Input Masks*/
	$('.phone').mask('(000)-000-0000');
	$('.years').mask('###');
	$('.money').mask('#,##0,000', {reverse: true, maxlength: false});
	$('.zipcode').mask('00000');

    $('#menu-item-89 a').append('<span>No personal information required</span>');

    /*Menu Fixed Position*/
	$('#main-navigation-wrapper').scrollToFixed();

	$('.home #page-footer').scrollToFixed( {
        bottom: 0
    });

	$('#splash-pager').scrollToFixed({
		bottom: 50
	});

	/*Show Footer*/
	$('#btn-show').click(function(){
		$('#footer-top').fadeToggle();
		$(this).toggleClass('active');
	});

	/*Form Inputs*/
	$('input').focus(function(){
		$(this).css('border','1px solid #91b3ea');
	});

	$('input').focusout(function(){
		$(this).attr('style','');
	});

	$('select').focus(function(){
		$(this).css('border','1px solid #91b3ea');
	});

	$('select').focusout(function(){
		$(this).attr('style','');
	});

	$('textarea').focus(function(){
		$(this).css('border','2px solid #91b3ea');
	});

	$('textarea').focusout(function(){
		$(this).attr('style','');
	});

	$('.input-text').focus(function(){

		currVal = $(this).val();
		defVal = $(this).attr('title');

		if(currVal == defVal){

			$(this).val('');

		}


	});

	$('.input-text').focusout(function(){

		defVal = $(this).attr('title')

		if($(this).val() == ''){

			$(this).val(defVal);

		}

	});

	/*Current Rates Tabs generated by Shortcode*/
	$('.tabs-list a').click(function(e){

		e.preventDefault();

		var getTab = $(this).attr('href');

		var parent = getTab.substr(0, 6);
		var list = '#list-' + getTab.substr(1, 5);

		$(list).find('li').removeClass('active');
		$(this).parent().addClass('active');

		$(parent).find('.tab-content').hide();
		$(getTab).fadeToggle();

	});

	/*Mortgage Rate Form Validation*/
	$('#mortgage-rate').validate({
		submitHandler: function(form) {

			$('#instant-rate').empty();

			var winheight = $('#instant-rate').height();

			$('#instant-rate').append('<div class="loading"><span>Please wait while we search for results</span></div>');
			$('.loading').css('height',winheight);

			var myDate = new Date();
			var displayDate = $.now();
			var posturl = $('#mortgage-rate').attr('action');
			var values = $('#mortgage-rate').serialize();

			 $.ajax({
		        url: posturl,
		        type: "post",
		        data: values,
		        success: function(data){

		        	if(data == ''){

		        		$('#instant-rate').empty();
		        		$('#instant-rate').append('<h3>Search criteria provided no eligible products</h3>');

		        	}else {

			        	$('#instant-rate').empty();
			        	$('#instant-rate').append(data);
			        	$('#instant-rate .date').append('<span class="date">Rates as of '+myDate+' <br/>Instant rate quotes data provided is in real-time and is subject to expire/change without notice</span>');

			        	timeout = setTimeout(function(){ timeout_init(); }, 420000);

		        	}


		        },
		        error:function(){
		          	console.log(data);
		        }
		    });


		}
	});

	$('#mortgage-submit').click(function(e){
		e.preventDefault();

		$('#mortgage-rate').submit();

	});

	//State County
	$('#state-list').change(function(){

		$('#county-list').show();

		state = $('#state-list option:selected').attr('state');

		var url = $('#countyapi').val() + '/library/county.php?state=' + state;

		$.ajax({
		    url: url,
		    dataType: 'json',
		    success: function(results){

		    	$('#county-list').find('option').remove();
		    	$('#county-list select').append('<option value="" selected>Select County</option>');
		     	jQuery.each(results, function(index, value) {
			       $('#county-list select').append('<option value="'+value+'">'+value+'</option>');
			   });

		    }
		});

	});

	// Data Validations
	$('#mortgage-rate input[name="LoanAmount"]').change(function(){

		LoanAmount = $(this).val();
		/*
		if(LoanAmount > 625000){

			$('#mortgage-rate select[name="LockPeriod"] option[value="30"]').remove();

		}else{

			var exists = false;
			$('#mortgage-rate select[name="LockPeriod"] option').each(function(){
			    if (this.value == '30') {
			        exists = true;
			    }
			});

			if(exists == false){

				$('#mortgage-rate select[name="LockPeriod"] option').eq(-3).before('<option value="30">30 Days</option>');

			}

		}
		*/

	});

	$('#mortgage-rate input[name="PropertyValue"]').change(function(){

		PropVal = $(this).val();
		LoanAmount = $('#mortgage-rate input[name="LoanAmount"]').val();

		percent = (LoanAmount * 100) / PropVal;

		if(percent > 90){

			$('#mortgage-rate select[name="EscrowWaiverIndicator"]').val('No');
			$('#mortgage-rate select[name="EscrowWaiverIndicator"]').prop('disabled',true);

		}else{

			$('#mortgage-rate select[name="EscrowWaiverIndicator"]').prop('disabled',false);
			$('#mortgage-rate select[name="EscrowWaiverIndicator"]').val('');

		}

	});
	/*End Mortgage Rate Elements*/

	/*Apply Now JS*/



	/*---- End Apply Now -----*/

	$(window).scroll(function(e){
		var scroll = $(window).scrollTop();
		var mainh = $('#top-banner .inner-shadow').height()-30;
		var adjust = mainh - scroll;
		$('.page #top-logo').height(adjust);
		$('.page-id-25 #top-logo').height(adjust-140);
	});

	/*Functions*/
	function timeout_init() {
	    clearTimeout(timeout);
	    $('#mortgage-rate').submit();
	}

	function pagerFactory(idx, slide) {
        var s = idx > 2 ? '' : '';
        return '<li'+s+'><a href="#">'+(idx+1)+'</a></li>';
    };

	function getParameterByName(name) {
	    name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
	    var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
	        results = regex.exec(location.search);
	    return results == null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
	}

	/*Smoot Anchor Targets*/

    $('.page-id-141 a[href^="#"]').on('click',function (e) {
	    e.preventDefault();

	    var target = this.hash,
	    $target = $(target);

	    $('html, body').stop().animate({
	        'scrollTop': $target.offset().top
	    }, 900, 'swing', function () {
	        window.location.hash = target;
	    });
	});

	 $('a[href^="#"].goto').on('click',function (e) {
	    e.preventDefault();

	    var target = this.hash,
	    $target = $(target);

	    $('html, body').stop().animate({
	        'scrollTop': $target.offset().top - 150
	    }, 900, 'swing', function () {
	        window.location.hash = target - 150;
	    });
	});

})(jQuery);